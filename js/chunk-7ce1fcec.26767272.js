(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ce1fcec"],{"452c":function(e,t,a){},9398:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tweet-list"},[e.isLoading?r("Spinner"):e._e(),e._l(e.userTweets,(function(t){return r("div",{key:t.id,staticClass:"tweet-card d-flex"},[r("router-link",{attrs:{to:{name:"user-profile",params:{userId:t.User.id}}}},[r("img",{staticClass:"avatar",attrs:{src:t.User.avatar,alt:""}})]),r("div",{staticClass:"tweet-info d-flex flex-column"},[r("div",{staticClass:"first-line"},[r("span",{staticClass:"text-name"},[e._v(e._s(t.User.name))]),r("span",{staticClass:"text-account"},[e._v("@"+e._s(t.User.account)+"ï¼Ž"+e._s(e._f("fromNow")(t.createdAt)))])]),r("router-link",{attrs:{to:{name:"single-tweet",params:{tweetId:t.id,tweet:t}}}},[r("div",{staticClass:"tweet-content"},[e._v(" "+e._s(t.description)+" ")])]),r("div",{staticClass:"action my-1"},[r("span",{staticClass:"icon-wrap"},[r("button",{staticClass:"btn-reply",attrs:{"data-bs-toggle":"modal","data-bs-target":"#new-reply-modal"},on:{click:function(a){return e.handleReplyModal(t)}}},[r("img",{staticClass:"reply",attrs:{src:a("49b3"),alt:""}})]),r("span",{staticClass:"text-like-reply"},[e._v(e._s(t.replyCount))])]),r("span",{staticClass:"icon-wrap ms-4"},[t.isLike?r("img",{staticClass:"like",attrs:{src:a("648b"),alt:""},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),e.deleteLike(t.id)}}}):r("img",{staticClass:"like",attrs:{src:a("a921"),alt:""},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),e.addLike(t.id)}}}),r("span",{staticClass:"text-like-reply"},[e._v(e._s(t.likeCount))])])])],1)],1)})),r("NewReplyModal",{attrs:{tweet:e.tweetActive},on:{"after-reply-submit":e.afterReplySubmit}})],2)},s=[],n=a("5530"),i=a("1da1"),c=(a("96cf"),a("a9e3"),a("d9e2"),a("d81d"),a("3d4f")),o=a("1602"),u=a("6783"),l=a("2375"),d=a("2708"),p=a("2fa3"),f={name:"userTweetList",components:{NewReplyModal:c["a"],Spinner:l["a"]},mixins:[d["b"]],props:{userId:{type:Number,required:!0}},data:function(){return{userTweets:[],isLoading:!0,tweetActive:{User:{}}}},created:function(){var e=this.userId;this.fetchTweets(e)},watch:{userId:function(e){this.fetchTweets(e)}},methods:{fetchTweets:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,o["a"].getUserTweets({userId:e});case 3:r=a.sent,s=r.data,t.userTweets=s,t.isLoading=!1,a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](0),t.isLoading=!1,p["a"].fire({icon:"error",title:a.t0.response.data.message});case 13:case"end":return a.stop()}}),a,null,[[0,9]])})))()},addLike:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u["a"].addLike({id:e});case 3:if(r=a.sent,"error"!==r.data.status){a.next=6;break}throw new Error;case 6:t.userTweets=t.userTweets.map((function(t){return t.id===e?Object(n["a"])(Object(n["a"])({},t),{},{isLike:!0,likeCount:t.likeCount+1}):(console.log(t),t)})),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](0),p["a"].fire({icon:"error",title:a.t0.response.data.message});case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))()},deleteLike:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u["a"].deleteLike({id:e});case 3:if(r=a.sent,"error"!==r.data.status){a.next=6;break}throw new Error;case 6:t.userTweets=t.userTweets.map((function(t){return+t.id===+e?Object(n["a"])(Object(n["a"])({},t),{},{isLike:!1,likeCount:t.likeCount-1}):t})),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](0),p["a"].fire({icon:"error",title:a.t0.response.data.message});case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))()},afterReplySubmit:function(e){var t=e.tweetId,a=e.replyCount;this.allTweets=this.allTweets.map((function(e){return e.id!==t?e:Object(n["a"])(Object(n["a"])({},e),{},{replyCount:a})}))},handleReplyModal:function(e){this.tweetActive=Object(n["a"])({},e)}}},w=f,m=(a("b558"),a("2877")),v=Object(m["a"])(w,r,s,!1,null,"2ff482c1",null);t["default"]=v.exports},b558:function(e,t,a){"use strict";a("452c")}}]);
//# sourceMappingURL=chunk-7ce1fcec.26767272.js.map